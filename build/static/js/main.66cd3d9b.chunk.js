(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,t,n){"use strict";n.r(t);var r=n(16),a=n.n(r),o=n(1),c=n(17),u=n(3),s=n(4),i=n.n(s),d="/api/persons",l={getAll:function(){return i.a.get(d).then((function(e){return e.data}))},postNew:function(e){return i.a.post(d,e).then((function(e){return e.data}))},deletePerson:function(e){return i.a.delete("".concat(d,"/").concat(e.id)).then((function(e){return e.data}))},putNum:function(e){return i.a.put("".concat(d,"/").concat(e.id),e).then((function(e){return e.data}))}},j=n(0),b=function(e){var t=e.title;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("h2",{children:t})})},O=function(e){var t=e.handler,n=e.text;return Object(j.jsxs)(j.Fragment,{children:[n,": ",Object(j.jsx)("input",{onChange:t})]})},p=function(e){var t=e.type,n=e.text;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("button",{type:t,children:n})})},E=function(e){var t=e.handler;return Object(j.jsx)(j.Fragment,{children:Object(j.jsxs)("form",{onSubmit:t,children:[Object(j.jsxs)("div",{children:["name: ",Object(j.jsx)("input",{})]}),Object(j.jsxs)("div",{children:["number: ",Object(j.jsx)("input",{})]}),Object(j.jsx)("div",{children:Object(j.jsx)(p,{type:"submit",text:"add"})})]})})},S=function(e){var t=e.persons,n=e.controller;return Object(j.jsx)(j.Fragment,{children:Object(j.jsx)("ul",{children:t.map((function(e){return Object(j.jsxs)("li",{children:[e.name," ",e.number,Object(j.jsx)("button",{onClick:function(){return n({type:"DELETE",payload:e})},children:"DELETE"})]},e.id)}))})})},f=function(){var e=Object(u.useState)({persons:[],toShow:[],getPersons:!0,toAdd:null,toDelete:null,toEditNum:null}),t=Object(c.a)(e,2),n=t[0],r=t[1];function a(e){switch(e.type){case"SUBMIT":e.payload.preventDefault();var t=e.payload.target[0].value,a=e.payload.target[1].value,c=n.persons.find((function(e){return e.name===t}));""===t||void 0===t?(alert("Stop that!"),r(Object(o.a)({},n))):c?window.confirm("Want to edit ".concat(t,"'s number?"))?r(Object(o.a)(Object(o.a)({},n),{},{toEditNum:{name:t,number:a,id:c.id}})):r(Object(o.a)({},n)):r(Object(o.a)(Object(o.a)({},n),{},{toAdd:{name:t,number:a}})),e.payload.target.reset();break;case"FILTER":var u=e.payload.target.value;n.toShow=n.persons.filter((function(e){return e.name.toLowerCase().includes(u.toLowerCase())})),r(Object(o.a)({},n));break;case"DELETE":window.confirm("Delete ".concat(e.payload.name))&&r(Object(o.a)(Object(o.a)({},n),{},{toDelete:e.payload}));break;case"GET_PERSONS_SUCCESS":n.persons=e.payload,r(Object(o.a)(Object(o.a)({},n),{},{toShow:n.persons,getPersons:!1}));break;case"POST_PERSON_SUCCESS":r(Object(o.a)(Object(o.a)({},n),{},{getPersons:!0,toAdd:null}));break;case"POST_PERSON_FAILURE":alert(e.payload),r(Object(o.a)(Object(o.a)({},n),{},{toAdd:null}));break;case"DELETE_PERSON_SUCCESS":r(Object(o.a)(Object(o.a)({},n),{},{getPersons:!0,toDelete:null}));break;case"PUT_PERSON_SUCCESS":r(Object(o.a)(Object(o.a)({},n),{},{getPersons:!0,toEditNum:null}));break;case"PUT_PERSON_FAILURE":alert(e.payload),r(Object(o.a)(Object(o.a)({},n),{},{toEditNum:null}))}}return Object(u.useEffect)((function(){n.getPersons&&l.getAll().then((function(e){return a({type:"GET_PERSONS_SUCCESS",payload:e})}))}),[n.getPersons]),Object(u.useEffect)((function(){n.toAdd&&l.postNew(n.toAdd).then((function(e){return a({type:"POST_PERSON_SUCCESS"})})).catch((function(e){return a({type:"POST_PERSON_FAILURE",payload:e.response.data.error})}))}),[n.toAdd]),Object(u.useEffect)((function(){n.toDelete&&l.deletePerson(n.toDelete).then((function(e){return a({type:"DELETE_PERSON_SUCCESS"})}))}),[n.toDelete]),Object(u.useEffect)((function(){n.toEditNum&&l.putNum(n.toEditNum).then((function(e){return a({type:"PUT_PERSON_SUCCESS"})})).catch((function(e){return a({type:"PUT_PERSON_FAILURE",payload:e.response.data.error})}))}),[n.toEditNum]),Object(j.jsxs)("div",{children:[Object(j.jsx)(b,{title:"Phonebook"}),Object(j.jsx)(O,{handler:function(e){return a({type:"FILTER",payload:e})},text:"filter"}),Object(j.jsx)(b,{title:"Add"}),Object(j.jsx)(E,{handler:function(e){return a({type:"SUBMIT",payload:e})}}),Object(j.jsx)(b,{title:"Numbers"}),Object(j.jsx)(S,{persons:n.toShow,controller:a})]})};a.a.render(Object(j.jsx)(f,{}),document.getElementById("root"))}},[[41,1,2]]]);
//# sourceMappingURL=main.66cd3d9b.chunk.js.map